openapi: 3.0.0
info:
  description: "Eine API zur Verwaltung von Nutzer*innen, Themen und Spielen, inkl.\
    \ Multiplayer-Features."
  title: Kahuut API
  version: 1.1.0
servers:
- url: /
paths:
  /auth/admin/register:
    post:
      operationId: auth_admin_register_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterAdmin'
        required: true
      responses:
        "201":
          description: Admin erfolgreich registriert
        "400":
          description: Ungültige Eingabe
      summary: Admin registrieren
      tags:
      - Auth
      x-openapi-router-controller: openapi_server.controllers.auth_controller
  /auth/login:
    post:
      operationId: auth_login_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Login'
        required: true
      responses:
        "200":
          description: Erfolgreicher Login (Token wird zurückgegeben)
        "401":
          description: Ungültige Anmeldedaten
      summary: Login für Admin/User
      tags:
      - Auth
      x-openapi-router-controller: openapi_server.controllers.auth_controller
  /auth/user/register:
    post:
      operationId: auth_user_register_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterUser'
        required: true
      responses:
        "201":
          description: User erfolgreich registriert
        "400":
          description: Ungültige Eingabe
      summary: User registrieren
      tags:
      - Auth
      x-openapi-router-controller: openapi_server.controllers.auth_controller
  /mehrspieler/join:
    post:
      operationId: mehrspieler_join_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/_mehrspieler_join_post_request'
        required: true
      responses:
        "200":
          description: Erfolgreich beigetreten
        "404":
          description: Ungültiger Code
        "401":
          description: Nicht autorisiert
      security:
      - BearerAuth: []
      summary: Mehrspieler-Quiz beitreten (per Code)
      tags:
      - Mehrspieler
      x-openapi-router-controller: openapi_server.controllers.mehrspieler_controller
  /mehrspieler/start:
    post:
      operationId: mehrspieler_start_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/_mehrspieler_start_post_request'
        required: true
      responses:
        "201":
          description: Mehrspieler-Session gestartet (Code zurückgegeben)
        "401":
          description: Nicht autorisiert
      security:
      - BearerAuth: []
      summary: Mehrspieler-Quiz starten (nur Admin)
      tags:
      - Mehrspieler
      x-openapi-router-controller: openapi_server.controllers.mehrspieler_controller
  /spielen:
    get:
      operationId: spielen_get
      parameters:
      - explode: true
        in: query
        name: userId
        required: true
        schema:
          type: string
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/Spiel'
                type: array
          description: Spielverlauf zurückgegeben
      summary: Spielverlauf eines Users
      tags:
      - Spielen
      x-openapi-router-controller: openapi_server.controllers.spielen_controller
    post:
      operationId: spielen_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Spiel'
        required: true
      responses:
        "201":
          description: Spiel wurde gespeichert
        "401":
          description: Nicht autorisiert
      security:
      - BearerAuth: []
      summary: Spiel starten (User - nur veröffentlichte Themen)
      tags:
      - Spielen
      x-openapi-router-controller: openapi_server.controllers.spielen_controller
  /themen:
    get:
      operationId: themen_get
      parameters:
      - description: Nur veröffentlichte Themen anzeigen (true/false)
        explode: true
        in: query
        name: published
        required: false
        schema:
          type: boolean
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/Thema'
                type: array
          description: Themenliste
      summary: Themen abrufen (optional gefiltert nach veröffentlicht)
      tags:
      - Themen
      x-openapi-router-controller: openapi_server.controllers.themen_controller
    post:
      operationId: themen_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Thema'
        required: true
      responses:
        "201":
          description: Thema wurde erstellt
        "401":
          description: Nicht autorisiert
      security:
      - BearerAuth: []
      summary: Neues Thema anlegen (Admin)
      tags:
      - Themen
      x-openapi-router-controller: openapi_server.controllers.themen_controller
components:
  schemas:
    RegisterAdmin:
      example:
        password: password
        name: name
        email: email
      properties:
        name:
          title: name
          type: string
        email:
          format: email
          title: email
          type: string
        password:
          format: password
          title: password
          type: string
      required:
      - email
      - name
      - password
      title: RegisterAdmin
      type: object
    RegisterUser:
      example:
        password: password
        name: name
        email: email
      properties:
        name:
          title: name
          type: string
        email:
          format: email
          title: email
          type: string
        password:
          format: password
          title: password
          type: string
      required:
      - email
      - name
      - password
      title: RegisterUser
      type: object
    Login:
      example:
        password: password
        email: email
      properties:
        email:
          format: email
          title: email
          type: string
        password:
          format: password
          title: password
          type: string
      required:
      - email
      - password
      title: Login
      type: object
    Thema:
      example:
        Antwort: Antwort
        Published: true
        Fragen: Fragen
        Code: Code
      properties:
        Fragen:
          title: Fragen
          type: string
        Antwort:
          title: Antwort
          type: string
        Code:
          title: Code
          type: string
        Published:
          description: "Gibt an, ob das Thema veröffentlicht ist"
          title: Published
          type: boolean
      required:
      - Antwort
      - Fragen
      - Published
      title: Thema
      type: object
    Spiel:
      example:
        fk_ID_User: fk_ID_User
        Punkte: 0
        fk_ID_Themen: fk_ID_Themen
        Zeit: 2000-01-23T04:56:07.000+00:00
      properties:
        fk_ID_User:
          title: fk_ID_User
          type: string
        fk_ID_Themen:
          title: fk_ID_Themen
          type: string
        Zeit:
          format: date-time
          title: Zeit
          type: string
        Punkte:
          title: Punkte
          type: integer
      required:
      - Punkte
      - fk_ID_Themen
      - fk_ID_User
      title: Spiel
      type: object
    _mehrspieler_start_post_request:
      properties:
        themaId:
          title: themaId
          type: string
      required:
      - themaId
      title: _mehrspieler_start_post_request
      type: object
    _mehrspieler_join_post_request:
      properties:
        code:
          title: code
          type: string
        userId:
          title: userId
          type: string
      required:
      - code
      - userId
      title: _mehrspieler_join_post_request
      type: object
  securitySchemes:
    BearerAuth:
      bearerFormat: JWT
      scheme: bearer
      type: http
      x-bearerInfoFunc: openapi_server.controllers.security_controller.info_from_BearerAuth
